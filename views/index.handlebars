<div class="container">
    <div class="row justify-content-center">
        <img src="/assets/img/ilya-mashkov-_qxbJUr9RqI-unsplash.jpg" alt="Burger" class="card-img"
            >
            </div>
            <div class="row justify-content-center">
        <h1>Eat-Da-Burger!</h1>
    </div>
    <div class="row justify-content-center">
        <ol>
            {{#each burgers}}
            {{#unless devoured}}
            <li class="notDoneYet">{{burger_name }} <button id="devoured" data-id={{id}} type="submit" class="btn btn-prmimary ">Devour
                    it!
                </button></li>
            {{/unless}}
            {{/each}}
        </ol>

        <ol>
            {{#each burgers}}
            {{#if devoured}}
            <li class="done">{{burger_name }}</li>
            {{/if}}
            {{/each}}
        </ol>
    </div>
    <div class="row justify-content-center">
        <form id="newBurger">
            <textarea type="text" name="burger"></textarea>
    </div>
    <div class="row justify-content-center">

        <button class="btn btn-primary" type="submit" name="devoured">Submit</button>
        </form>
    </div>

</div>
<script type="text/javascript">
    $(() => {

        $("#devoured").on("click", function (event) {
            var id = $(this).data("id");
            // Send the PUT request.
            console.log(id);
            $.ajax("/api/burgers/" + id, {
                type: "PUT",
            }).then(
                function () {
                    console.log(" your burger is ready");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
        $("#newBurger").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();

            // [name=burger] will find an element with a "name" attribute equal to the string "plan"
            var newBurg = {
                burger_name: $("[name=burger]").val().trim()
            };

            // Send the POST request.
            $.ajax("/api/burgers", {
                type: "POST",
                data: newBurg
            }).then(
                function () {
                    console.log(" new burger  ordered");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    });
</script>