<div class="container">
    <div class="row justify-content-center">

        <h1>Burgers Orders!</h1>
    </div>
    <h2>Burgers are not ready!</h2>

    <ol>
        {{#each burgers}}
        {{#unless devoured}}
        <li>{{burger_name }} <button id="devoured" data-id={{id}} type="submit" class="btn btn-prmimary ">Devoured </button></li>
        {{/unless}}
        {{/each}}
    </ol>

    <h2>Burgers are ready!</h2>
<ol>
    {{#each burgers}}
    {{#if devoured}}
    <li>{{burger_name }}</li>
    {{/if}}
    {{/each}}
</ol>
    <div>
        <form id="newBurger">
            <textarea type="text" name="burger"></textarea>

            <button type="submit" name="devoured">Submit</button>
        </form>
    </div>
</div>
<script type="text/javascript">
    $(() => {

        $("#devoured").on("click", function (event) {
            var id = $(this).data("id");
            // Send the PUT request.
            console.log(id);
            $.ajax("/api/burgers/" + id, {
                type: "PUT",
            }).then(
                function () {
                    console.log(" your burger is ready");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
        $("#newBurger").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();

            // [name=burger] will find an element with a "name" attribute equal to the string "plan"
            var newBurg = {
                burger_name: $("[name=burger]").val().trim()
            };

            // Send the POST request.
            $.ajax("/api/burgers", {
                type: "POST",
                data: newBurg
            }).then(
                function () {
                    console.log(" new burger  ordered");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    });
</script>